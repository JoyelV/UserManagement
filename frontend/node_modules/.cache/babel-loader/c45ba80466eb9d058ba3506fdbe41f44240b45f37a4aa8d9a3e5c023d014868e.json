{"ast":null,"code":"var _jsxFileName = \"B:\\\\WEEKS\\\\Week 19\\\\user_management_react-main\\\\user_management_react-main\\\\frontend\\\\src\\\\components\\\\EditUser\\\\EditUser.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { useNavigate, useParams } from \"react-router-dom\";\nimport classes from \"./EditUser.module.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst EditUser = () => {\n  _s();\n  const {\n    id\n  } = useParams();\n  const [name, setName] = useState(\"\");\n  const [email, setEmail] = useState(\"\");\n  const [profileImage, setProfileImage] = useState(null);\n  const [previewImage, setPreviewImage] = useState(null);\n  const navigate = useNavigate();\n  useEffect(() => {\n    const fetchUser = async () => {\n      try {\n        const token = localStorage.getItem(\"authToken\");\n        const response = await axios.get(`http://localhost:5000/admin/user/${id}`, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        const {\n          name,\n          email,\n          profileImage\n        } = response.data.user;\n        setName(name);\n        setEmail(email);\n        setProfileImage(profileImage);\n        setPreviewImage(`http://localhost:5000/uploads/${profileImage}`);\n      } catch (error) {\n        console.error(\"Error fetching user details: \", error.response.data.message);\n      }\n    };\n    fetchUser();\n  }, [id]);\n  const handleImageChange = e => {\n    const file = e.target.files[0];\n    setProfileImage(file);\n    setPreviewImage(URL.createObjectURL(file));\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    try {\n      const formData = new FormData();\n      formData.append(\"name\", name);\n      formData.append(\"email\", email);\n      if (profileImage) {\n        formData.append(\"profileImage\", profileImage);\n      }\n      const token = localStorage.getItem(\"authToken\");\n      await axios.put(`http://localhost:5000/admin/user/${id}`, formData, {\n        headers: {\n          \"Content-Type\": \"multipart/form-data\",\n          Authorization: `Bearer ${token}`\n        }\n      });\n      navigate(\"/admin-dashboard\");\n    } catch (error) {\n      console.log(\"Error updating user: \", error.response.data.message);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: classes.editUserContainer,\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: classes.editUserTitle,\n      children: \"Edit User\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      className: classes.editUserForm,\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"Name\",\n        value: name,\n        className: classes.editUserInput,\n        onChange: e => setName(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"email\",\n        placeholder: \"Email\",\n        value: email,\n        className: classes.editUserInput,\n        onChange: e => setEmail(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this), previewImage && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.editUserPreview,\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: previewImage,\n          alt: \"Profile Preview\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.editUserInputFile,\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          id: \"file-upload\",\n          onChange: handleImageChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"file-upload\",\n          children: \"Choose New Profile Image\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: classes.editUserButton,\n        children: \"Update User\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 5\n  }, this);\n};\n_s(EditUser, \"zHvwJ/hgv6RZwGCBkzq5hu5PgeM=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = EditUser;\nexport default EditUser;\nvar _c;\n$RefreshReg$(_c, \"EditUser\");","map":{"version":3,"names":["React","useState","useEffect","axios","useNavigate","useParams","classes","jsxDEV","_jsxDEV","EditUser","_s","id","name","setName","email","setEmail","profileImage","setProfileImage","previewImage","setPreviewImage","navigate","fetchUser","token","localStorage","getItem","response","get","headers","Authorization","data","user","error","console","message","handleImageChange","e","file","target","files","URL","createObjectURL","handleSubmit","preventDefault","formData","FormData","append","put","log","className","editUserContainer","children","editUserTitle","fileName","_jsxFileName","lineNumber","columnNumber","editUserForm","onSubmit","type","placeholder","value","editUserInput","onChange","editUserPreview","src","alt","editUserInputFile","htmlFor","editUserButton","_c","$RefreshReg$"],"sources":["B:/WEEKS/Week 19/user_management_react-main/user_management_react-main/frontend/src/components/EditUser/EditUser.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { useNavigate, useParams } from \"react-router-dom\";\nimport classes from \"./EditUser.module.css\";\n\nconst EditUser = () => {\n  const { id } = useParams();\n  const [name, setName] = useState(\"\");\n  const [email, setEmail] = useState(\"\");\n  const [profileImage, setProfileImage] = useState(null);\n  const [previewImage, setPreviewImage] = useState(null);\n\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    const fetchUser = async () => {\n      try {\n        const token = localStorage.getItem(\"authToken\");\n        const response = await axios.get(\n          `http://localhost:5000/admin/user/${id}`,{\n            headers:{Authorization: `Bearer ${token}`}\n          }\n        );\n        const { name, email, profileImage } = response.data.user;\n        setName(name);\n        setEmail(email);\n        setProfileImage(profileImage);\n        setPreviewImage(`http://localhost:5000/uploads/${profileImage}`);\n      } catch (error) {\n        console.error(\n          \"Error fetching user details: \",\n          error.response.data.message\n        );\n      }\n    };\n    fetchUser();\n  }, [id]);\n\n  const handleImageChange = (e) => {\n    const file = e.target.files[0];\n    setProfileImage(file);\n    setPreviewImage(URL.createObjectURL(file));\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    try {\n      const formData = new FormData();\n      formData.append(\"name\", name);\n      formData.append(\"email\", email);\n      if (profileImage) {\n        formData.append(\"profileImage\", profileImage);\n      }\n      const token = localStorage.getItem(\"authToken\");\n      await axios.put(`http://localhost:5000/admin/user/${id}`, formData, {\n        headers: {\n          \"Content-Type\": \"multipart/form-data\",\n          Authorization: `Bearer ${token}`,\n\n        },\n      });\n      navigate(\"/admin-dashboard\");\n    } catch (error) {\n      console.log(\"Error updating user: \", error.response.data.message);\n    }\n  };\n\n  return (\n    <div className={classes.editUserContainer}>\n      <h2 className={classes.editUserTitle}>Edit User</h2>\n      <form className={classes.editUserForm} onSubmit={handleSubmit}>\n        <input\n          type=\"text\"\n          placeholder=\"Name\"\n          value={name}\n          className={classes.editUserInput}\n          onChange={(e) => setName(e.target.value)}\n        />\n        <input\n          type=\"email\"\n          placeholder=\"Email\"\n          value={email}\n          className={classes.editUserInput}\n          onChange={(e) => setEmail(e.target.value)}\n        />\n        {previewImage && (\n          <div className={classes.editUserPreview}>\n            <img src={previewImage} alt=\"Profile Preview\" />\n          </div>\n        )}\n        <div className={classes.editUserInputFile}>\n          <input type=\"file\" id=\"file-upload\" onChange={handleImageChange} />\n          <label htmlFor=\"file-upload\">Choose New Profile Image</label>\n        </div>\n        <button type=\"submit\" className={classes.editUserButton}>\n          Update User\n        </button>\n      </form>\n    </div>\n  );\n};\n\nexport default EditUser;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}